{"ast":null,"code":"var _jsxFileName = \"/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/1-src/src/SignTransaction.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { ChainNetwork } from \"oreid-js\";\nimport { useOreId, useUser } from \"oreid-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SignTransaction = () => {\n  _s();\n\n  const oreId = useOreId();\n  const user = useUser();\n  const chainNetwork = ChainNetwork.EthMain;\n  const [error, setError] = useState(\"\");\n\n  const onError = error => {\n    console.log(\"Transaction failed \", error);\n    setError(error);\n  };\n\n  const onSucces = result => {\n    console.log(\"Transaction Successful. \", JSON.stringify(result));\n  };\n\n  const signingAccount = user.chainAccounts.find(ca => ca.chainNetwork === chainNetwork);\n  const errorMsg = `User doesn not have any accounts on ${chainNetwork}`;\n\n  if (!signingAccount) {\n    console.log(errorMsg);\n    onError(errorMsg);\n    return;\n  }\n\n  ;\n  const transactionBody = {\n    from: signingAccount.chainAccount,\n    to: signingAccount.chainAccount,\n    value: 0\n  };\n\n  const handleSign = async () => {\n    const transaction = await oreId.createTransaction({\n      chainAccount: signingAccount.chainAccount,\n      chainNetwork: signingAccount.chainNetwork,\n      //@ts-ignore\n      transaction: transactionBody,\n      signOptions: {\n        broadcast: true,\n        returnSignedTransaction: false\n      }\n    });\n    oreId.popup.sign({\n      transaction\n    }).then(onSucces).catch(onError);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        handleSign();\n      },\n      children: \"Send Sample Transaction\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SignTransaction, \"oqxdM8g7krzZR9A/9qig2yL894I=\", false, function () {\n  return [useOreId, useUser];\n});\n\n_c = SignTransaction;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignTransaction\");","map":{"version":3,"names":["useState","ChainNetwork","useOreId","useUser","SignTransaction","oreId","user","chainNetwork","EthMain","error","setError","onError","console","log","onSucces","result","JSON","stringify","signingAccount","chainAccounts","find","ca","errorMsg","transactionBody","from","chainAccount","to","value","handleSign","transaction","createTransaction","signOptions","broadcast","returnSignedTransaction","popup","sign","then","catch","message"],"sources":["/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/1-src/src/SignTransaction.js"],"sourcesContent":["import { useState } from \"react\";\nimport { ChainNetwork } from \"oreid-js\";\nimport { useOreId, useUser } from \"oreid-react\";\n\n\nexport const SignTransaction = () => {\n    const oreId = useOreId();\n    const user = useUser();\n    const chainNetwork = ChainNetwork.EthMain;\n    const[ error, setError ] = useState(\"\")\n\n    const onError = (error) => {\n        console.log(\"Transaction failed \", error);\n        setError( error );\n    }\n\n    const onSucces = ( result ) => {\n        console.log( \n            \"Transaction Successful. \", JSON.stringify(result)\n        );\n    }\n    \n    const signingAccount = user.chainAccounts.find(\n        (ca) => ca.chainNetwork ===  chainNetwork\n    );\n\n    const errorMsg = `User doesn not have any accounts on ${chainNetwork}`\n\n    if (!signingAccount) {\n        console.log( errorMsg );\n        onError( errorMsg )\n        return;\n    };\n\n    const transactionBody = {\n        from: signingAccount.chainAccount,\n        to: signingAccount.chainAccount,\n        value: 0\n    };\n\n    const handleSign = async () => {\n        const transaction = await oreId.createTransaction({\n            chainAccount: signingAccount.chainAccount,\n            chainNetwork: signingAccount.chainNetwork,\n            //@ts-ignore\n            transaction: transactionBody,\n            signOptions: {\n                broadcast: true,\n                returnSignedTransaction: false,\n            },\n        });\n        \n        oreId.popup\n            .sign({ transaction })\n            .then( onSucces )\n            .catch( onError );\n    };\n\n    return(\n        <div>\n            <button\n                onClick={() => {\n                    handleSign()\n                }}\n            >\n                Send Sample Transaction\n            </button>\n\n            {error && <div>Error: {error.message}</div>}\n        </div>\n    );\n};"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,YAAT,QAA6B,UAA7B;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,aAAlC;;AAGA,OAAO,MAAMC,eAAe,GAAG,MAAM;EAAA;;EACjC,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;EACA,MAAMI,IAAI,GAAGH,OAAO,EAApB;EACA,MAAMI,YAAY,GAAGN,YAAY,CAACO,OAAlC;EACA,MAAK,CAAEC,KAAF,EAASC,QAAT,IAAsBV,QAAQ,CAAC,EAAD,CAAnC;;EAEA,MAAMW,OAAO,GAAIF,KAAD,IAAW;IACvBG,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCJ,KAAnC;IACAC,QAAQ,CAAED,KAAF,CAAR;EACH,CAHD;;EAKA,MAAMK,QAAQ,GAAKC,MAAF,IAAc;IAC3BH,OAAO,CAACC,GAAR,CACI,0BADJ,EACgCG,IAAI,CAACC,SAAL,CAAeF,MAAf,CADhC;EAGH,CAJD;;EAMA,MAAMG,cAAc,GAAGZ,IAAI,CAACa,aAAL,CAAmBC,IAAnB,CAClBC,EAAD,IAAQA,EAAE,CAACd,YAAH,KAAqBA,YADV,CAAvB;EAIA,MAAMe,QAAQ,GAAI,uCAAsCf,YAAa,EAArE;;EAEA,IAAI,CAACW,cAAL,EAAqB;IACjBN,OAAO,CAACC,GAAR,CAAaS,QAAb;IACAX,OAAO,CAAEW,QAAF,CAAP;IACA;EACH;;EAAA;EAED,MAAMC,eAAe,GAAG;IACpBC,IAAI,EAAEN,cAAc,CAACO,YADD;IAEpBC,EAAE,EAAER,cAAc,CAACO,YAFC;IAGpBE,KAAK,EAAE;EAHa,CAAxB;;EAMA,MAAMC,UAAU,GAAG,YAAY;IAC3B,MAAMC,WAAW,GAAG,MAAMxB,KAAK,CAACyB,iBAAN,CAAwB;MAC9CL,YAAY,EAAEP,cAAc,CAACO,YADiB;MAE9ClB,YAAY,EAAEW,cAAc,CAACX,YAFiB;MAG9C;MACAsB,WAAW,EAAEN,eAJiC;MAK9CQ,WAAW,EAAE;QACTC,SAAS,EAAE,IADF;QAETC,uBAAuB,EAAE;MAFhB;IALiC,CAAxB,CAA1B;IAWA5B,KAAK,CAAC6B,KAAN,CACKC,IADL,CACU;MAAEN;IAAF,CADV,EAEKO,IAFL,CAEWtB,QAFX,EAGKuB,KAHL,CAGY1B,OAHZ;EAIH,CAhBD;;EAkBA,oBACI;IAAA,wBACI;MACI,OAAO,EAAE,MAAM;QACXiB,UAAU;MACb,CAHL;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,EASKnB,KAAK,iBAAI;MAAA,sBAAaA,KAAK,CAAC6B,OAAnB;IAAA;MAAA;MAAA;MAAA;IAAA,QATd;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAaH,CAlEM;;GAAMlC,e;UACKF,Q,EACDC,O;;;KAFJC,e"},"metadata":{},"sourceType":"module"}