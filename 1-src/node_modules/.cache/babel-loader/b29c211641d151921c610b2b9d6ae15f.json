{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global[\"oreid-react\"] = {}, global.React));\n})(this, function (exports, React) {\n  'use strict';\n\n  function _interopDefaultLegacy(e) {\n    return e && typeof e === 'object' && 'default' in e ? e : {\n      'default': e\n    };\n  }\n\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  var OreIdContext = React.createContext({\n    //@ts-ignore\n    oreId: undefined,\n    user: undefined,\n    setUser: function () {\n      return undefined;\n    },\n    isLoggedIn: false,\n    setIsLoggedIn: function () {\n      return undefined;\n    },\n    accessToken: undefined,\n    setAccessToken: function () {\n      return undefined;\n    }\n  }); // @ts-nocheck\n\n  var Observables = function () {\n    var _a = React.useContext(OreIdContext),\n        oreId = _a.oreId,\n        setUser = _a.setUser,\n        setAccessToken = _a.setAccessToken,\n        setIsLoggedIn = _a.setIsLoggedIn;\n\n    var _b = React.useState(oreId.auth.user),\n        authUser = _b[0],\n        setAuthUser = _b[1];\n\n    var updateUserState = React.useCallback(function (newUser) {\n      try {\n        setUser(newUser === null || newUser === void 0 ? void 0 : newUser.data);\n      } catch (err) {\n        setUser(undefined);\n      }\n    }, [setUser]);\n    var updateOreIdState = React.useCallback(function (auth) {\n      setAuthUser(auth === null || auth === void 0 ? void 0 : auth.user);\n      setIsLoggedIn(auth.isLoggedIn);\n      setAccessToken(auth.accessToken);\n    }, [setAuthUser, setIsLoggedIn, setAccessToken]);\n    React.useEffect(function () {\n      oreId.auth.subscribe(updateOreIdState);\n      return function () {\n        oreId.auth.unsubscribe(updateOreIdState);\n      };\n    }, [oreId, updateOreIdState]);\n    React.useEffect(function () {\n      if (!authUser) return;\n      authUser.subscribe(updateUserState);\n      authUser.getData().catch(function () {// ! If it fails, nothing needs to be done.\n        // ! This function should stay here to prevent the error alert from appearing in the console\n      });\n      return function () {\n        authUser.unsubscribe(updateUserState);\n      };\n    }, [authUser]);\n    return null;\n  };\n\n  var OreidProvider = function (_a) {\n    var children = _a.children,\n        oreId = _a.oreId;\n\n    var _b = React.useState(undefined),\n        user = _b[0],\n        setUser = _b[1];\n\n    var _c = React.useState(false),\n        isLoggedIn = _c[0],\n        setIsLoggedIn = _c[1];\n\n    var _d = React.useState(undefined),\n        accessToken = _d[0],\n        setAccessToken = _d[1];\n\n    if (!oreId.popup) {\n      throw new Error(\"oreId popup must be initialized. Make sure you added the plugin and called oreId.init()\");\n    }\n\n    return React__default[\"default\"].createElement(OreIdContext.Provider, {\n      value: {\n        oreId: oreId,\n        user: user,\n        setUser: setUser,\n        isLoggedIn: isLoggedIn,\n        setIsLoggedIn: setIsLoggedIn,\n        accessToken: accessToken,\n        setAccessToken: setAccessToken\n      }\n    }, React__default[\"default\"].createElement(Observables, null), children);\n  };\n\n  var useIsLoggedIn = function () {\n    var isLoggedIn = React.useContext(OreIdContext).isLoggedIn;\n    return isLoggedIn;\n  };\n\n  var useOreId = function () {\n    var oreId = React.useContext(OreIdContext).oreId;\n    return oreId;\n  };\n\n  var useUser = function () {\n    var user = React.useContext(OreIdContext).user;\n    return user;\n  };\n\n  exports.OreidProvider = OreidProvider;\n  exports.useIsLoggedIn = useIsLoggedIn;\n  exports.useOreId = useOreId;\n  exports.useUser = useUser;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"mappings":"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","names":["OreIdContext","createContext","oreId","undefined","user","setUser","isLoggedIn","setIsLoggedIn","accessToken","setAccessToken","Observables","useContext","auth","useState","authUser","setAuthUser","updateUserState","useCallback","newUser","data","err","updateOreIdState","useEffect","subscribe","unsubscribe","getData","catch","OreidProvider","_a","children","popup","Error","React","createElement","Provider","value"],"sources":["/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/node_modules/oreid-react/src/OreIdContext/OreIdContext.tsx","/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/node_modules/oreid-react/src/components/Observables/Observables.tsx","/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/node_modules/oreid-react/src/components/OreidProvider/OreIdProvider.tsx","/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/node_modules/oreid-react/src/hooks/useIsLoggedIn/useIsLoggedIn.ts","/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/node_modules/oreid-react/src/hooks/useOreId/useOreId.ts","/Users/j/Code/ore-test-barebones-node-v14/create-react-app/react-app-test/node_modules/oreid-react/src/hooks/useUser/useUser.ts"],"sourcesContent":["import { createContext } from \"react\";\nimport { OreId, UserData } from \"oreid-js\";\n\nexport const OreIdContext = createContext<{\n\toreId: OreId;\n\tuser: UserData | undefined;\n\tsetUser: (user: UserData | undefined) => void;\n\tisLoggedIn: boolean;\n\tsetIsLoggedIn: (isLoggedIn: boolean) => void;\n\taccessToken: string | undefined;\n\tsetAccessToken: (accessToken: string | undefined) => void;\n}>({\n\t//@ts-ignore\n\toreId: undefined,\n\tuser: undefined,\n\tsetUser: () => undefined,\n\tisLoggedIn: false,\n\tsetIsLoggedIn: () => undefined,\n\taccessToken: undefined,\n\tsetAccessToken: () => undefined,\n});\n","// @ts-nocheck\n\nimport { Auth, User } from \"oreid-js\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { OreIdContext } from \"src/OreIdContext\";\n\ninterface Props {}\nexport const Observables: React.FC<Props> = () => {\n\tconst { oreId, setUser, setAccessToken, setIsLoggedIn } =\n\t\tuseContext(OreIdContext);\n\tconst [authUser, setAuthUser] = useState<User | undefined>(oreId.auth.user);\n\n\tconst updateUserState = useCallback(\n\t\t(newUser: User) => {\n\t\t\ttry {\n\t\t\t\tsetUser(newUser?.data);\n\t\t\t} catch (err) {\n\t\t\t\tsetUser(undefined);\n\t\t\t}\n\t\t},\n\t\t[setUser]\n\t);\n\n\tconst updateOreIdState = useCallback(\n\t\t(auth: Auth) => {\n\t\t\tsetAuthUser(auth?.user);\n\t\t\tsetIsLoggedIn(auth.isLoggedIn);\n\t\t\tsetAccessToken(auth.accessToken);\n\t\t},\n\t\t[setAuthUser, setIsLoggedIn, setAccessToken]\n\t);\n\n\tuseEffect(() => {\n\t\toreId.auth.subscribe(updateOreIdState);\n\t\treturn () => {\n\t\t\toreId.auth.unsubscribe(updateOreIdState);\n\t\t};\n\t}, [oreId, updateOreIdState]);\n\n\tuseEffect(() => {\n\t\tif (!authUser) return;\n\t\tauthUser.subscribe(updateUserState);\n\t\tauthUser.getData().catch(() => {\n\t\t\t// ! If it fails, nothing needs to be done.\n\t\t\t// ! This function should stay here to prevent the error alert from appearing in the console\n\t\t});\n\t\treturn () => {\n\t\t\tauthUser.unsubscribe(updateUserState);\n\t\t};\n\t}, [authUser]);\n\n\treturn null;\n};\n","import React from \"react\";\nimport { OreId, UserData } from \"oreid-js\";\nimport { OreIdContext } from \"src/OreIdContext\";\nimport { useState } from \"react\";\nimport { Observables } from \"../Observables\";\n\ninterface Props {\n\toreId: OreId;\n\n\tchildren: React.ReactNode;\n}\nexport const OreidProvider: React.FC<Props> = ({ children, oreId }) => {\n\tconst [user, setUser] = useState<UserData | undefined>(undefined);\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\n\tconst [accessToken, setAccessToken] = useState<string | undefined>(undefined);\n\n\tif (!oreId.popup) {\n\t\tthrow new Error(\n\t\t\t\"oreId popup must be initialized. Make sure you added the plugin and called oreId.init()\"\n\t\t);\n\t}\n\n\treturn (\n\t\t<OreIdContext.Provider\n\t\t\tvalue={{\n\t\t\t\toreId,\n\t\t\t\tuser,\n\t\t\t\tsetUser,\n\t\t\t\tisLoggedIn,\n\t\t\t\tsetIsLoggedIn,\n\t\t\t\taccessToken,\n\t\t\t\tsetAccessToken,\n\t\t\t}}\n\t\t>\n\t\t\t<Observables />\n\t\t\t{children}\n\t\t</OreIdContext.Provider>\n\t);\n};\n","import { useContext } from \"react\";\nimport { OreIdContext } from \"src/OreIdContext\";\n\nexport const useIsLoggedIn = () => {\n\tconst { isLoggedIn } = useContext(OreIdContext);\n\treturn isLoggedIn;\n};\n","import { useContext } from \"react\";\nimport { OreIdContext } from \"src/OreIdContext\";\n\nexport const useOreId = () => {\n\tconst { oreId } = useContext(OreIdContext);\n\treturn oreId;\n};\n","import { useContext } from \"react\";\nimport { OreIdContext } from \"src/OreIdContext\";\n\nexport const useUser = () => {\n\tconst { user } = useContext(OreIdContext);\n\treturn user;\n};\n"]},"metadata":{},"sourceType":"script"}